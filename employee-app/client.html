<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management System</title>
    <link rel="stylesheet" href="">
</head>
<body>
    <h1>EMS - Employee Management System</h1>
    <button onclick="handleClick()">
        Fetch Employee Details
    </button>

    <h2>Total Employees - <span id="count">0</span></h2>
    <ul id="list"></ul>
    <!--
        when the user clicks on the button, call the display function in the function
        alert your name and city;
    -->
    <!-- <button onclick="infoClick()">Display Info</button> -->

    <!--JavaScript file -->
    <script>

        function handleClick(){  // eventListener / eventHandler
            //traditional - xhr obj  [xhr - XMLHttpRequest]
            const countHandle = document.getElementById('count');
            const listHandle = document.getElementById('list');

            //clean-up code
            listHandle.innerHTML = "";

            const xhr = new XMLHttpRequest();  // create new object
            xhr.open("GET", "http://localhost:4000/employees");  //configure xhr obj
            xhr.send();  //send the request to the server

            xhr.onload = function(){  //fn gets called once the response has been received from the server
                const data = JSON.parse(xhr.responseText); //parse the data
                console.log(data);
                countHandle.textContent = data.length;
                data.forEach(function(ele){
                    const liTag = document.createElement('li');
                    liTag.textContent = ele.name;
                    listHandle.appendChild(liTag);
                })
                // console.log(typeof data, data); //object
               

                //to get all the users data using for-each
                data.forEach((ele) => {
                    console.log(ele.name);
                })
            }
        }

        // function infoClick(){
        //     alert("Ramit  - Bangalore")
        // }
    </script>
</body>
</html>